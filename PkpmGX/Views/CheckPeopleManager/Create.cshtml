@model Pkpm.Entity.Models.CheckPeopleViewModel

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/LayuiTab_Layout.cshtml";
}

 <link href="~/static/layuiadmin/layui/css/formSelects-v4.css" rel="stylesheet" />


<div class="layui-container">
    <div class="layui-row" id="CheckPeopleManager-Details-Container">
        <form class="layui-form" action="" lay-filter="CheckPeopleManager-Create-form">
            <div class="layui-card">
                <div class="layui-card-header">基本信息</div>
                <div class="layui-card-body">
                    <div class="layui-form-item">
                        <div class="layui-col-md8">
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <input type="text" name="PhotoPath" id="PhotoPath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="selfnumPath" id="selfnumPath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="postTypeCode" id="postTypeCode" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="PostType" id="PostType" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="educationpath" id="educationpath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="zcgccszhpath" id="zcgccszhpath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="PostPath" id="PostPath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="titlepath" id="titlepath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="filePath" id="filePath" placeholder="" autocomplete="off" class="layui-hide">
                                    <input type="text" name="id" placeholder="" autocomplete="off" class="layui-hide">
                                    <div class="layui-form-label">检测机构名称<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <select name="Customid" lay-verify="required" disabled lay-search="">
                                            @{
                                                foreach (var item in Model.CheckUnitNames)
                                                {
                                                    <option value="@item.Key">@item.Value</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">性别</div>
                                    <div class="layui-input-block">
                                        <select name="Sex" lay-search="">
                                            <option value=""></option>
                                            @{
                                                foreach (var item in Model.Sex)
                                                {
                                                    <option value="@item.Name">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">姓名<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" lay-verify="required" name="Name" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">出生年月<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" name="Birthday" id="Birthday" lay-verify="required" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">身份证号<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" name="SelfNum" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">岗位证书编号<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" name="PostNum" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">是否有岗位证书<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <select name="ishaspostnum" lay-search="" lay-verify="required">
                                            <option value=""></option>
                                            @{
                                                foreach (var item in Model.YesNo)
                                                {
                                                    <option value="@item.KeyValue">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">岗位证书有效期<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" name="postnumdate" lay-verify="required" id="postnumdate" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">岗位证书获得时间<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" name="PostDate" id="PostDate" lay-verify="required" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">毕业学校</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="School" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">最高学历</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="Education" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">职称<font color="red">*</font></div>
                                    <div class="layui-input-block">

                                        <select name="Title">
                                            <option value=""></option>
                                            @{
                                                foreach (var item in Model.PersonnelTitles)
                                                {
                                                    <option value="@item.KeyValue">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">专业<font color="red">*</font></div>
                                    <div class="layui-input-block">
                                        <input type="text" name="Professional" lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">联系电话</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="Tel" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">职务</div>
                                    <div class="layui-input-block">
                                        <select name="zw" xm-select="zw">
                                            <option value=""></option>
                                            @{
                                                foreach (var item in Model.PersonnelStaff)
                                                {
                                                    <option value="@item.Name">@item.Name</option>}
                                            }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">电子邮箱</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="Email" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">是否为注册工程师</div>
                                    <div class="layui-input-block">
                                        <select name="iszcgccs" xm-select="iszcgccs">
                                            <option value="" title=""></option>
                                            @{
                                                foreach (var item in Model.EngineersType)
                                                {
                                                    <option value="@item.Name">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">在职状况<font color="red">*</font></div>
                                    <div class="layui-input-block">

                                        <select name="iscb" lay-verify="required" lay-search="">
                                            <option value=""></option>
                                            @{
                                                foreach (var item in Model.WorkStatus)
                                                {
                                                    <option value="@item.KeyValue">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">是否注册在本单位</div>
                                    <div class="layui-input-block">
                                        <select name="isreghere" lay-search="">
                                            <option value="" title=""></option>
                                            @{
                                                foreach (var item in Model.YesNo)
                                                {
                                                    <option value="@item.KeyValue">@item.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">社保号码</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="SBNum" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">注册工程师证书号</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="zcgccszh" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">注册工程师证书有效期</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="zcgccszhdate" id="zcgccszhdate" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-col-md6">
                                    <div class="layui-form-label">从事检测工作年限</div>
                                    <div class="layui-input-block">
                                        <input type="text" name="gznx" placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md4">
                            @*<div class="layui-form-label">照片</div>
                            <div class="layui-input-block">
                                <img src="/CheckPeopleManager/Image?itemValue=@Model.people.PhotoPath" width="180px" height="200px" />
                            </div>*@
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header">岗位信息</div>
                <div class="layui-card-body">
                    <div class="layui-form-item">
                        <div class="layui-col-md1 ">
                            <text>岗位资格类别：</text>
                        </div>

                        <div class="layui-col-md1 ">
                            <button type="button" class="layui-btn" id="ClickOnAdd">点击添加</button>
                        </div>

                        @*<div class="layui-col-md1 layui-col-md-offset1">
                            <button type="button" class="layui-btn" id="PublicNumber">自动生成公示序号</button>
                        </div>*@
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <textarea rows="6" name="postTypeView" id="postTypeView" class="layui-textarea" readonly="true"></textarea>
                        </div>
                    </div>
                  
                    <div class="layui-form-item">
                        <div class="layui-col-md12 ">
                            <div class="layui-form-label">岗位证书延续注册情况</div>
                            <div class="layui-input-block">
                                <input type="text" id="postDelayReg" name="postDelayReg" placeholder="" autocomplete="off" class="layui-textarea">
                            </div>
                        </div>


                        @*<div class="layui-col-md1 layui-col-md-offset1">
                            <text>岗位证书延续注册情况</text>
                        </div>
                        <div class="layui-col-md10">
                            <textarea id="textarea" name="postDelayReg">
                            </textarea>
                            <div class="layui-input-block">
                                <input type="text" lay-verify="required" id="textarea" name="postDelayReg" placeholder="" autocomplete="off" class="layui-input">
                            </div>
                        </div>*@
                    </div>

                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header">其他信息</div>
                <div class="layui-card-body">
                    <div class="layui-form-item">
                        <div class="layui-col-md12 layui-col-space15">
                            <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                                <ul class="layui-tab-title">
                                    <li>变更情况</li>
                                    <li>年审情况</li>
                                    <li>继续教育情况</li>
                                    <li>获奖情况</li>
                                    <li>处罚情况</li>
                                </ul>
                                <div class="layui-tab-content" style="height:100%">
                                    <div class="layui-tab-item layui-show">
                                        <label class="layui-form-label">
                                            变更情况
                                            <br />
                                            <a style='color:#5FB878' href="javascript:void(0);" id="ChangeAddCheckItem">[增加]</a>
                                        </label>
                                        <div class="layui-input-block">
                                            <table class="layui-table" lay-size="sm" id="ChangeCheckItems-table">
                                                <colgroup>
                                                    <col width="200" />
                                                    <col />
                                                    <col width="50" />
                                                    <col width="50" />
                                                </colgroup>
                                                <thead>
                                                    <tr>
                                                        <th>变更时间</th>
                                                        <th>变更内容</th>
                                                        <th></th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="layui-tab-item">
                                        <label class="layui-form-label">
                                            年审情况
                                            <br />
                                            <a style='color:#5FB878' href="javascript:void(0);" id="VerificationAddCheckItem">[增加]</a>
                                        </label>
                                        <div class="layui-input-block">
                                            <table class="layui-table" lay-size="sm" id="VerificationCheckItems-table">
                                                <colgroup>
                                                    <col width="100" />
                                                    <col />
                                                    <col width="100" />
                                                </colgroup>
                                                <thead>
                                                    <tr>
                                                        <th>年审时间</th>
                                                        <th>内容</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                   
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="layui-tab-item">
                                        <label class="layui-form-label">
                                            继续教育情况
                                            <a style='color:#5FB878' href="javascript:void(0);" id="EducationAddCheckItem">[增加]</a>
                                        </label>
                                        <div class="layui-input-block">
                                            <table class="layui-table" lay-size="sm" id="EducationCheckItems-table">
                                                <colgroup>
                                                    <col width="100" />
                                                    <col />
                                                    <col width="200" />
                                                    <col width="200" />
                                                    <col width="100" />
                                                </colgroup>
                                                <thead>
                                                    <tr>
                                                        <th>时间</th>
                                                        <th>内容</th>
                                                        <th>培训机构</th>
                                                        <th>考试时间</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                   
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="layui-tab-item">
                                        <label class="layui-form-label">
                                            获奖情况
                                            <br />
                                            <a style='color:#5FB878' href="javascript:void(0);" id="AwardsAddCheckItem">[增加]</a>
                                        </label>
                                        <div class="layui-input-block">
                                            <table class="layui-table" lay-size="sm" id="AwardsCheckItems-table">
                                                <colgroup>
                                                    <col width="200" />
                                                    <col />
                                                    <col width="200" />
                                                    <col width="100" />
                                                </colgroup>
                                                <thead>
                                                    <tr>
                                                        <th>日期</th>
                                                        <th>获奖名称</th>
                                                        <th>发奖单位</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                   
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="layui-tab-item">
                                        <label class="layui-form-label">
                                            处罚情况
                                            <br />
                                            <a style='color:#5FB878' href="javascript:void(0);" id="PunishAddCheckItem">[增加]</a>
                                        </label>
                                        <div class="layui-input-block">
                                            <table class="layui-table" lay-size="sm" id="PunishCheckItems-table">
                                                <colgroup>
                                                    <col width="100" />
                                                    <col />
                                                    <col width="150" />
                                                    <col width="150" />
                                                    <col width="100" />
                                                </colgroup>
                                                <thead>
                                                    <tr>

                                                        <th>日期</th>
                                                        <th>处罚名称</th>
                                                        <th>处罚机构</th>
                                                        <th>处罚内容</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-header">附件上传</div>
                <div class="layui-form-item">
                    <div class="layui-col-md12 layui-col-space15">
                        <label class="layui-form-label">附件上传</label>
                        <div class="layui-input-block">
                            <table class="layui-table" lay-size="sm">
                                <colgroup>
                                    <col width="200" />
                                    <col />
                                    <col width="100" />
                                </colgroup>
                                <thead>
                                    <tr>
                                        <td>名称</td>
                                        <td>状态</td>
                                        <td>操作</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        foreach (var item in Model.CheckPeopleFile)
                                        {
                                            <tr id="@item.Number">
                                                <td >@item.FileName</td>
                                                <td  class="state">未上传</td>
                                                <td><a href="javascript:void(0);" onclick=fileGrid_Edit("@item.FileName","@item.Number")>查看</a></td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-card">
                <div class="layui-card-body">
                    <div class="layui-form-item">
                        <div class="layui-col-md5">
                            <button class="layui-btn" lay-submit lay-filter="checkPeopleManager-Create-save">保存</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>


<script>
    $('#ChangeCheckItems-table').on('click', '.ChangeCheckItems-table-table-btnDel', function () {
        $(this).parent().parent().remove();
    });
    $('#VerificationCheckItems-table').on('click', '.VerificationCheckItems-table-table-btnDel', function () {
        $(this).parent().parent().remove();
    });
    $('#EducationCheckItems-table').on('click', '.EducationCheckItems-table-table-btnDel', function () {
        $(this).parent().parent().remove();
    });
    $('#AwardsCheckItems-table').on('click', '.AwardsCheckItems-table-table-btnDel', function () {
        $(this).parent().parent().remove();
    });
    $('#PunishCheckItems-table').on('click', '.PunishCheckItems-table-table-btnDel', function () {
        $(this).parent().parent().remove();
    });
    $('#ChangeCheckItems-table').on('click', '.ChangeCheckItems-table-table-btnEdit', function () {
        EditIndex = $(this).parent().parent().attr("id");
        var tableHtml = $(this).parent().parent()[0];
        $.each(tableHtml, function (index, val) {
            if (index == 'innerText') {
                layer.open({
                    type: 2,
                    area: ['700px', '450px'],
                    fixed: false, //不固定
                    maxmin: true,
                    title: '变更情况编辑',
                    content: '/CheckPeopleManager/EditChange?ChangeTable=' + encodeURIComponent(val)
                });
            }
        })
        return false;
    });
    $('#ChangeAddCheckItem').on("click", function () {
        layer.open({
            type: 2,
            area: ['700px', '450px'],
            fixed: false, //不固定
            maxmin: true,
            title: '变更情况新增',
            content: '/CheckPeopleManager/ChangeAddCheckItem'
        });
    })
    $('#VerificationAddCheckItem').on("click", function () {
        layer.open({
            type: 2,
            area: ['700px', '450px'],
            fixed: false, //不固定
            maxmin: true,
            title: '年审情况新增',
            content: '/CheckPeopleManager/VerificationAddCheckItem'
        });
    })
    $('#EducationAddCheckItem').on("click", function () {
        layer.open({
            type: 2,
            area: ['700px', '450px'],
            fixed: false, //不固定
            maxmin: true,
            title: '继续教育情况新增',
            content: '/CheckPeopleManager/EducationAddCheckItem'
        });
    })
    $('#AwardsAddCheckItem').on("click", function () {
        layer.open({
            type: 2,
            area: ['700px', '450px'],
            fixed: false, //不固定
            maxmin: true,
            title: '获奖情况新增',
            content: '/CheckPeopleManager/AwardsAddCheckItem'
        });
    })
    $('#PunishAddCheckItem').on("click", function () {
        layer.open({
            type: 2,
            area: ['700px', '450px'],
            fixed: false, //不固定
            maxmin: true,
            title: '处罚情况新增',
            content: '/CheckPeopleManager/PunishAddCheckItem'
        });
    })
    layui.config({
        base: '../../Static/layuiadmin/lib/' //静态资源所在路径
    }).extend({
        index: 'lib/index',
        formSelects: 'formSelects-v4'
    });
    layui.use(["form", "element", "layer", "table", "view", 'formSelects', 'layedit', 'laydate'], function () {
        var $ = layui.$,
            form = layui.form,
            layer = layui.layer,
            table = layui.table,
            layedit = layui.layedit,
            view = layui.view,
            laydate = layui.laydate,
            formSelects = layui.formSelects,
            element = layui.element,
            router = layui.router();


       

        form.on('submit(checkPeopleManager-Create-save)', function (data) {
            var dataField = data.field;

            if (dataField.postTypeView == '') {
                parent.layer.msg('请添加岗位资格类别');
                return false;
            }
            if (dataField.postDelayReg == '') {
                parent.layer.msg('请填写岗位证书延续注册情况');
                return false;
            }

            if (dataField.PhotoPath == '') {
                parent.layer.msg('请上传证件照');
                return false;
            }
            if (dataField.selfnumPath == '') {
                parent.layer.msg('请上传身份证');
                return false;
            }
            if (dataField.educationpath == '') {
                parent.layer.msg('请上传最高学历证件');
                return false;
            }
            if (dataField.zcgccszhpath == '') {
                parent.layer.msg('请上传注册工程师证书');
                return false;
            }
            if (dataField.PostPath == '') {
                parent.layer.msg('请上传岗位证书');
                return false;
            }
            if (dataField.titlepath == '') {
                parent.layer.msg('请上传职称证书');
                return false;
            }
           
            var peoAward = '', peoPunish = '', peoChange = '', peoVerification = '', peoEducation = '';
            var peoAwards = [], peoPunishs = [], peoChanges = [], peoVerifications = [], peoEducations = [];
            $.each($('#ChangeCheckItems-table tr'), function (i) {
                var onepeoChange = {};
                $(this).find('td').each(function (i) {
                    $td = $(this);
                    onepeoChange[$td.attr("data-CheckPeopleChange")] = $td.text();
                    if (i == 2) {
                        peoChanges.push(onepeoChange);
                        onepeoChange = {};
                    }
                })
            });

            $.each($('#VerificationCheckItems-table tr'), function (i) {
                var onepeoVerification = {};
                $(this).find('td').each(function (i) {
                    $td = $(this);
                    onepeoVerification[$td.attr("data-CheckPeopleVerification")] = $td.text();
                    if (i == 2) {
                        peoVerifications.push(onepeoVerification);
                        onepeoVerification = {};
                    }
                })
            });
            $.each($('#EducationCheckItems-table tr'), function (i) {
                var onepeoEducation = {};
                $(this).find('td').each(function (i) {
                    $td = $(this);
                    onepeoEducation[$td.attr("data-CheckPeopleEducation")] = $td.text();
                    if (i == 4) {
                        peoEducations.push(onepeoEducation);
                        onepeoEducation = {};
                    }
                })
            });
            $.each($('#AwardsCheckItems-table tr'), function (i) {
                var onepeoAward = {};
                $(this).find('td').each(function (i) {
                    $td = $(this);
                    onepeoAward[$td.attr("data-CheckPeopleAwards")] = $td.text();
                    if (i == 3) {
                        peoAwards.push(onepeoAward);
                        onepeoAward = {};
                    }
                })
            });
            $.each($('#PunishCheckItems-table tr'), function (i) {
                var onepeoPunish = {};
                $(this).find('td').each(function (i) {
                    $td = $(this);
                    onepeoPunish[$td.attr("data-CheckPeoplePunish")] = $td.text();
                    if (i == 4) {
                        peoPunishs.push(onepeoPunish);
                        onepeoPunish = {};
                    }
                })
            });
            dataField["peoChange"] = peoChanges;
            dataField["peoVerification"] = peoVerifications;
            dataField["peoEducation"] = peoEducations;
            dataField["peoAwards"] = peoAwards;
            dataField["peoPunish"] = peoPunishs;


            $.ajax({
                type: "POST",
                dataType: "json",
                data: dataField,
                url: "/CheckPeopleManager/Create",
                success: function (d) {
                    if (d.IsSucc) {
                        layer.msg('人员新增成功', {
                            time: 0,
                            btn: ['确定'],
                            yes: function (index) {
                                layer.close(index);
                                window.parent.Hui_admin_close("/CheckPeopleManager/Create/");
                            },
                            icon: 1
                        });
                    } else {
                        layer.msg('人员新增失败，错误信息：' + d.ErroMsg, {
                            icon: 2
                        });
                    }
                }
            })
            return false;
        });




        //layedit.build('textarea');

        laydate.render({
            elem: '#Birthday'
        });
        laydate.render({
            elem: '#PostDate'
        });
        laydate.render({
            elem: '#postnumdate',
            range: true
        });
        laydate.render({
            elem: '#zcgccszhdate',
            range: true
        });

    });
    
    $('#ClickOnAdd').on("click", function () {
        layer.open({
            type: 2,
            area: ['1100px', '700px'],
            fixed: false,
            manmin: true,
            title: "岗位资质类别表",
            content: '/CheckPeopleManager/PostType?id=-1' + '&postTypeCode='  + '&displaytype=2'
        });
    });

    function postTypeClose(postType, postTypeCode, postTypeView) {
        layer.closeAll();
        $('#postTypeCode').val(postTypeCode);
        $('#PostType').val(postType);
        $('#postTypeView').val(postTypeView)

    }



</script>

<script>



    function fileGrid_Edit(FileName, Number) {
        var fileErl = "";
        if (Number == 0) {
           
            fileUrl = $('#PhotoPath').val();
        } else if (Number == 1) {
            fileUrl = $('#selfnumPath').val();
        } else if (Number == 2) {
            fileUrl = $('#educationpath').val();
        } else if (Number == 3) {
            fileUrl = $('#zcgccszhpath').val();
        } else if (Number == 4) {
            fileUrl = $('#PostPath').val();
        } else if (Number == 5) {
            fileUrl = $('#titlepath').val();
        }

        layer.open({
            type: 2,
            area: ['800px', '700px'],
            title: FileName,
            content: "/CheckPeopleManager/EditFile?filePath=" + encodeURIComponent(fileUrl) +"&id="+Number+ "&name=" + FileName.split("编辑")[0],

            cancel: function (index, layero) {

                if ($('#filePath').val()) {
                    if (Number == 0) {
                      
                        $('#PhotoPath').val($('#filePath').val());
                    } else if (Number == 1) {
                        $('#selfnumPath').val($('#filePath').val());
                    } else if (Number == 2) {
                        $('#educationpath').val($('#filePath').val());
                    } else if (Number == 3) {
                        $('#zcgccszhpath').val($('#filePath').val());
                    } else if (Number == 4) {
                        $('#PostPath').val($('#filePath').val());
                    } else if (Number == 5) {
                        $('#titlepath').val($('#filePath').val());
                    }
                }
            }
        });
    }


    function file_Details() {

    }

    function file_Delete() {
        $(this).parent().parent().remove();
    }
</script>

